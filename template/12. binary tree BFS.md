## template

```python
from collections import deque

def fn(root):
    queue = deque([root])
    res = 0
    while queue:
        l = len(queue)
        # some code
        for _ in range(l):
            node = queue.popleft()
            # some code
            if node.left:
                queue.append(node.left)
            if node.right:
                queue.append(node.right)
    return res
```

### 2458. Height of Binary Tree After Subtree Removal Queries

```python
class Solution:
    def treeQueries(self, root: Optional[TreeNode], queries: List[int]) -> List[int]:
        d = defaultdict(int)
        def dfs_height(node):
            if not node:
                return 0
            h = max(dfs_height(node.left), dfs_height(node.right)) + 1
            d[node] = h 
            return h 
        dfs_height(root)
        
        res = [0] * (len(d) + 1)
        def dfs(node, height, rest_h):
            if not node:
                return 
            height += 1
            res[node.val] = rest_h
            dfs(node.left, height, max(rest_h, height + d[node.right]))
            dfs(node.right, height, max(rest_h, height + d[node.left]))
        dfs(root, -1, 0)

        for i, q in enumerate(queries):
            queries[i] = res[q]
        return queries
```